<div class="config-container">
  <div class="config-card">
    <div class="header-with-lang">
      <h1>{{ translationService.t('app.title') }}</h1>
      <app-language-switcher></app-language-switcher>
    </div>

    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <button 
        class="mode-btn" 
        [class.active]="mode === 'basic'"
        (click)="mode = 'basic'"
      >
        {{ translationService.t('mode.basic') }}
      </button>
      <button 
        class="mode-btn" 
        [class.active]="mode === 'advanced'"
        (click)="mode = 'advanced'"
      >
        {{ translationService.t('mode.advanced') }}
      </button>
    </div>

    <!-- Hints Toggle -->
    <div class="hints-toggle">
      <label class="hints-toggle-label">
        <input 
          type="checkbox" 
          [(ngModel)]="showHints"
          (change)="toggleShowHints()"
        />
        <span>{{ translationService.t('ui.showHints') }}</span>
      </label>
    </div>

    <!-- Basic Mode -->
    @if (mode === 'basic') {
    <div class="input-section">
      <div class="input-group">
        <label for="codeLength">
          <span class="label-title">{{ translationService.t('basic.codeLength') }}</span>
          <span class="label-subtitle">{{ translationService.t('basic.codeLengthSubtitle') }}</span>
        </label>
        <input 
          type="number" 
          id="codeLength"
          [(ngModel)]="codeLength"
          (ngModelChange)="validateCodeLength()"
          (blur)="validateCodeLength()"
          min="1"
          step="1"
          placeholder="e.g., 10"
        />
      </div>

      <div class="input-group">
        <label>
          <span class="label-title">{{ translationService.t('basic.prefixStrategy') }}</span>
          <span class="label-subtitle">{{ translationService.t('basic.prefixStrategySubtitle') }}</span>
        </label>
        <div class="radio-group">
          <label class="radio-option">
            <input 
              type="radio" 
              name="prefixStrategy" 
              value="date"
              [(ngModel)]="prefixStrategy"
              (ngModelChange)="savePrefixStrategy()"
            />
            <span>{{ translationService.t('basic.prefixDate') }}</span>
          </label>
          <label class="radio-option radio-option-with-input">
            <input 
              type="radio" 
              name="prefixStrategy" 
              value="static"
              [(ngModel)]="prefixStrategy"
              (ngModelChange)="savePrefixStrategy()"
            />
            <span>{{ translationService.t('basic.prefixStatic') }}:</span>
            <input 
              type="number" 
              id="staticPrefix"
              [(ngModel)]="staticPrefix"
              (ngModelChange)="validateStaticPrefix()"
              (blur)="validateStaticPrefix()"
              (click)="prefixStrategy = 'static'; savePrefixStrategy()"
              min="0"
              step="1"
              placeholder="123456"
              class="inline-prefix-input"
            />
          </label>
        </div>
        
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.exampleLabel') }}</strong>
          <ul>
            @if (prefixStrategy === 'date') {
            <li [innerHTML]="translationService.t('basic.exampleDate', { date: getPrefix(), code: getFirstCodeExample() })"></li>
            }
            @if (prefixStrategy === 'static') {
            <li [innerHTML]="translationService.t('basic.exampleStatic', { code: getFirstCodeExample() })"></li>
            }
          </ul>
        </div>
        }
      </div>

      <div class="input-group">
        <label for="startOffset">
          <span class="label-title">{{ translationService.t('basic.startOffset') }}</span>
          <span class="label-subtitle">{{ translationService.t('basic.startOffsetSubtitle') }}</span>
        </label>
        <input 
          type="number" 
          id="startOffset"
          [(ngModel)]="startOffset"
          (input)="validateOffset()"
          (blur)="validateOffset()"
          min="0"
          [max]="getMaxOffset()"
          step="1"
          placeholder="0"
        />
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.exampleLabel') }}</strong>
          <ul>
            <li [innerHTML]="translationService.t('basic.offsetExampleDynamic', { offset: startOffset, code: getOffsetExample(startOffset) })"></li>
          </ul>
        </div>
        }
      </div>

      <div class="counts-row">
        <div class="input-group">
          <label for="countFives">
            <span class="label-title">{{ translationService.t('basic.countFives') }}</span>
            <span class="label-subtitle">{{ translationService.t('basic.countFivesSubtitle') }}</span>
          </label>
          <input 
            type="number" 
            id="countFives"
            [(ngModel)]="countFives"
            (ngModelChange)="validateCountFives()"
            min="0"
            placeholder="0"
          />
        </div>

        <div class="input-group">
          <label for="countTens">
            <span class="label-title">{{ translationService.t('basic.countTens') }}</span>
            <span class="label-subtitle">{{ translationService.t('basic.countTensSubtitle') }}</span>
          </label>
          <input 
            type="number" 
            id="countTens"
            [(ngModel)]="countTens"
            (ngModelChange)="validateCountTens()"
            min="0"
            placeholder="0"
          />
        </div>
      </div>
    </div>
    }

    <!-- Advanced Mode -->
    @if (mode === 'advanced') {
    <div class="input-section">
      <div class="input-group">
        <label for="labelInput">
          <span class="label-title">{{ translationService.t('advanced.regularLabels') }}</span>
          <span class="label-subtitle">{{ translationService.t('advanced.regularLabelsSubtitle') }}</span>
        </label>
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('advanced.examples') }}</strong>
          <ul>
            <li><code>7008440080, 7008440081</code> - {{ translationService.t('advanced.exampleComma') }}</li>
            <li><code>100-105</code> - {{ translationService.t('advanced.exampleRange') }}</li>
          </ul>
        </div>
        }
        <textarea 
          id="labelInput"
          [(ngModel)]="labelInput" 
          placeholder="e.g., 7008440080, 7008440081, 100-105"
          rows="3"
        ></textarea>
      </div>

      <div class="input-group">
        <label for="fivesInput">
          <span class="label-title">{{ translationService.t('advanced.fivesTitle') }}</span>
          <span class="label-subtitle">{{ translationService.t('advanced.fivesSubtitle') }}</span>
        </label>
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('advanced.examples') }}</strong>
          <ul>
            <li><code>100</code> {{ translationService.t('advanced.fivesExample1') }}</li>
            <li><code>700844008</code> {{ translationService.t('advanced.fivesExample2') }}</li>
            <li><code>100, 200</code> - {{ translationService.t('advanced.multipleBase') }}</li>
            <li><code>100-102</code> - {{ translationService.t('advanced.rangeBase') }}</li>
          </ul>
        </div>
        }
        <textarea 
          id="fivesInput"
          [(ngModel)]="fivesInput" 
          placeholder="e.g., 100, 200, 300-305"
          rows="3"
        ></textarea>
      </div>

      <div class="input-group">
        <label for="tensInput">
          <span class="label-title">{{ translationService.t('advanced.tensTitle') }}</span>
          <span class="label-subtitle">{{ translationService.t('advanced.tensSubtitle') }}</span>
        </label>
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('advanced.examples') }}</strong>
          <ul>
            <li><code>100</code> {{ translationService.t('advanced.tensExample1') }}</li>
            <li><code>700844008</code> {{ translationService.t('advanced.tensExample2') }}</li>
            <li><code>100-102</code> - {{ translationService.t('advanced.rangeGenerates') }}</li>
          </ul>
        </div>
        }
        <textarea 
          id="tensInput"
          [(ngModel)]="tensInput" 
          placeholder="e.g., 100, 999944001"
          rows="3"
        ></textarea>
      </div>
    </div>
    }

    <button 
      class="generate-btn" 
      (click)="generateLabels()"
      [disabled]="!hasAnyInput()"
    >
      {{ translationService.t('button.generate') }}
    </button>
  </div>
</div>
