<div class="config-container">
  <div class="config-card">
    <div class="header-with-lang">
      <h1>{{ translationService.t('app.title') }}</h1>
      <div class="header-controls">
        <app-language-switcher></app-language-switcher>
        <div class="hints-toggle">
          <label class="hints-toggle-label">
            <input 
              type="checkbox" 
              [(ngModel)]="showHints"
              (change)="toggleShowHints()"
            />
            <span>{{ translationService.t('ui.showHints') }}</span>
          </label>
        </div>
      </div>
    </div>

    <div class="input-section">
      <div class="input-group">
        <label for="codeLength">
          <span class="label-title">{{ translationService.t('basic.codeLength') }}</span>
        </label>
        <input 
          type="number" 
          id="codeLength"
          [(ngModel)]="codeLength"
          (ngModelChange)="validateCodeLength()"
          (blur)="validateCodeLength()"
          min="1"
          step="1"
          placeholder="e.g., 14"
        />
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.descriptionLabel') }}</strong>
          <p class="hint-text">{{ translationService.t('basic.codeLengthSubtitle') }}</p>
        </div>
        }
      </div>

      <div class="input-group">
        <label>
          <span class="label-title">{{ translationService.t('basic.prefixStrategy') }}</span>
        </label>
        <div class="radio-group">
          <label class="radio-option">
            <input 
              type="radio" 
              name="prefixStrategy" 
              value="date"
              [(ngModel)]="prefixStrategy"
              (ngModelChange)="savePrefixStrategy()"
            />
            <span>{{ translationService.t('basic.prefixDate') }}</span>
          </label>
          <label class="radio-option radio-option-with-input">
            <input 
              type="radio" 
              name="prefixStrategy" 
              value="static"
              [(ngModel)]="prefixStrategy"
              (ngModelChange)="savePrefixStrategy()"
            />
            <span>{{ translationService.t('basic.prefixStatic') }}:</span>
            <input 
              type="number" 
              id="staticPrefix"
              [(ngModel)]="staticPrefix"
              (ngModelChange)="validateStaticPrefix()"
              (blur)="validateStaticPrefix()"
              (click)="prefixStrategy = 'static'; savePrefixStrategy()"
              min="0"
              step="1"
              placeholder="123456"
              class="inline-prefix-input"
            />
          </label>
        </div>
        
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.descriptionLabel') }}</strong>
          <p class="hint-text">{{ translationService.t('basic.prefixStrategySubtitle') }}</p>
          <strong>{{ translationService.t('basic.exampleLabel') }}</strong>
          <ul>
            @if (prefixStrategy === 'date') {
            <li [innerHTML]="translationService.t('basic.exampleDate', { date: getPrefix(), code: getFirstCodeExample() })"></li>
            }
            @if (prefixStrategy === 'static') {
            <li [innerHTML]="translationService.t('basic.exampleStatic', { code: getFirstCodeExample() })"></li>
            }
          </ul>
        </div>
        }
      </div>

      <div class="input-group">
        <label for="startOffset">
          <span class="label-title">{{ translationService.t('basic.startOffset') }}</span>
        </label>
        <input 
          type="number" 
          id="startOffset"
          [(ngModel)]="startOffset"
          (input)="validateOffset()"
          (blur)="validateOffset()"
          min="0"
          [max]="getMaxOffset()"
          step="1"
          placeholder="0"
        />
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.descriptionLabel') }}</strong>
          <p class="hint-text">{{ translationService.t('basic.startOffsetSubtitle') }}</p>
          <strong>{{ translationService.t('basic.exampleLabel') }}</strong>
          <ul>
            <li [innerHTML]="translationService.t('basic.offsetExampleDynamic', { offset: startOffset, code: getOffsetExample(startOffset) })"></li>
          </ul>
        </div>
        }
      </div>

      <div class="input-group">
        <label>
          <span class="label-title">{{ translationService.t('basic.groupCountsTitle') }}</span>
        </label>
        
        <div class="counts-grid">
          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(4)">
            <label for="countFours">{{ translationService.t('basic.countFours') }}</label>
            <input 
              type="number" 
              id="countFours"
              [(ngModel)]="countFours"
              (ngModelChange)="validateCountFours()"
              min="0"
              placeholder="0"
            />
          </div>

          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(5)">
            <label for="countFives">{{ translationService.t('basic.countFives') }}</label>
            <input 
              type="number" 
              id="countFives"
              [(ngModel)]="countFives"
              (ngModelChange)="validateCountFives()"
              min="0"
              placeholder="0"
            />
          </div>

          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(6)">
            <label for="countSixes">{{ translationService.t('basic.countSixes') }}</label>
            <input 
              type="number" 
              id="countSixes"
              [(ngModel)]="countSixes"
              (ngModelChange)="validateCountSixes()"
              min="0"
              placeholder="0"
            />
          </div>

          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(7)">
            <label for="countSevens">{{ translationService.t('basic.countSevens') }}</label>
            <input 
              type="number" 
              id="countSevens"
              [(ngModel)]="countSevens"
              (ngModelChange)="validateCountSevens()"
              min="0"
              placeholder="0"
            />
          </div>

          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(8)">
            <label for="countEights">{{ translationService.t('basic.countEights') }}</label>
            <input 
              type="number" 
              id="countEights"
              [(ngModel)]="countEights"
              (ngModelChange)="validateCountEights()"
              min="0"
              placeholder="0"
            />
          </div>

          <div class="count-item" [class.divisible]="isGroupDivisibleByColumns(10)">
            <label for="countTens">{{ translationService.t('basic.countTens') }}</label>
            <input 
              type="number" 
              id="countTens"
              [(ngModel)]="countTens"
              (ngModelChange)="validateCountTens()"
              min="0"
              placeholder="0"
            />
          </div>
        </div>
        
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.descriptionLabel') }}</strong>
          <p class="hint-text">{{ translationService.t('basic.groupCountsHint') }}</p>
        </div>
        }
      </div>

      <!-- Page Configuration Section -->
      <div class="input-group">
        <div class="page-config-section">
          <div class="page-config-header">
            <h2>{{ translationService.t('page.title') }}</h2>
            <button 
              class="restore-btn" 
              (click)="restoreDefaultPageConfig()"
              [title]="translationService.t('page.restoreDefaults')"
            >
              â†»
            </button>
          </div>
          
          <div class="config-grid">
          <div class="input-group-small">
            <label for="paddingTop">{{ translationService.t('page.paddingTop') }}</label>
            <input 
              type="number" 
              id="paddingTop"
              [(ngModel)]="paddingTop"
              (ngModelChange)="onPageConfigChange()"
              min="0"
              step="0.1"
              placeholder="10.7"
            />
          </div>

          <div class="input-group-small">
            <label for="paddingBottom">{{ translationService.t('page.paddingBottom') }}</label>
            <input 
              type="number" 
              id="paddingBottom"
              [(ngModel)]="paddingBottom"
              (ngModelChange)="onPageConfigChange()"
              min="0"
              step="0.1"
              placeholder="10.7"
            />
          </div>

          <div class="input-group-small">
            <label for="paddingLeft">{{ translationService.t('page.paddingLeft') }}</label>
            <input 
              type="number" 
              id="paddingLeft"
              [(ngModel)]="paddingLeft"
              (ngModelChange)="onPageConfigChange()"
              min="0"
              step="0.1"
              placeholder="10"
            />
          </div>

          <div class="input-group-small">
            <label for="paddingRight">{{ translationService.t('page.paddingRight') }}</label>
            <input 
              type="number" 
              id="paddingRight"
              [(ngModel)]="paddingRight"
              (ngModelChange)="onPageConfigChange()"
              min="0"
              step="0.1"
              placeholder="10"
            />
          </div>

          <div class="input-group-small">
            <label for="columns">{{ translationService.t('page.columns') }}</label>
            <input 
              type="number" 
              id="columns"
              [(ngModel)]="columns"
              (ngModelChange)="onPageConfigChange()"
              min="1"
              step="1"
              placeholder="5"
            />
          </div>

          <div class="input-group-small">
            <label for="rows">{{ translationService.t('page.rows') }}</label>
            <input 
              type="number" 
              id="rows"
              [(ngModel)]="rows"
              (ngModelChange)="onPageConfigChange()"
              min="1"
              step="1"
              placeholder="13"
            />
          </div>

          <div class="input-group-small">
            <label for="labelWidth">{{ translationService.t('page.labelWidth') }}</label>
            <input 
              type="number" 
              id="labelWidth"
              [(ngModel)]="labelWidth"
              (ngModelChange)="onPageConfigChange()"
              min="1"
              step="0.1"
              placeholder="38"
            />
          </div>

          <div class="input-group-small">
            <label for="labelHeight">{{ translationService.t('page.labelHeight') }}</label>
            <input 
              type="number" 
              id="labelHeight"
              [(ngModel)]="labelHeight"
              (ngModelChange)="onPageConfigChange()"
              min="1"
              step="0.1"
              placeholder="21.2"
            />
          </div>
        </div>
        
        @if (pageConfigErrors.length > 0) {
        <div class="validation-errors">
          @for (error of pageConfigErrors; track $index) {
          <div class="error-message">{{ error }}</div>
          }
        </div>
        }
        
        @if (showHints) {
        <div class="examples">
          <strong>{{ translationService.t('basic.descriptionLabel') }}</strong>
          <p class="hint-text">{{ translationService.t('page.subtitle') }}</p>
        </div>
        }
        </div>
      </div>
    </div>

    <button 
      class="generate-btn" 
      (click)="generateLabels()"
      [disabled]="!hasAnyInput()"
    >
      {{ translationService.t('button.generate') }}
    </button>
  </div>
</div>
